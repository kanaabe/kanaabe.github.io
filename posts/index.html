
<!DOCTYPE HTML>
<html>
<head>
	<meta charset="utf-8">
	<title>All Posts - kanaabe</title>
	<meta name="author" content="Kana Abe">

	
	<meta name="description" content="All Posts Getting Started With SVG Everyone seems to have at least some interest in data visualization lately. It&rsquo;s pretty, it&rsquo;s &hellip;">
	
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

	<link href="" rel="alternate" title="kanaabe" type="application/atom+xml">
	<link rel="canonical" href="">
	<link href="/favicon.png" rel="shortcut icon">
	<link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
	<!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
	<script src="//ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
	<link href='http://fonts.googleapis.com/css?family=Open+Sans:400italic,400,700' rel='stylesheet' type='text/css'>
	<!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href='http://fonts.googleapis.com/css?family=PT+Sans:400,700,400italic' rel='stylesheet' type='text/css'>
</head>

<body>
	<div class="container">	

			<div class="mid-col-container">
				<div id="content" class="inner">
					<div class="all-posts">
  <div class="container">
    <div class="row">
      <div class="list-title col-md-offset-3 col-md-6">
        <h4>All Posts</h4>
      </div>
    </div>
  </div>

  <div class="article-list">
    <div class="container">
      
      
      <div class="row">
        <div class="col-md-offset-3 col-md-6">
          <article>
  <h2><a href="/blog/2014/11/13/getting-started-with-d3/">Getting Started With SVG</a></h2>
  
  <p>
    <p>Everyone seems to have at least <em>some</em> interest in data visualization lately. It&rsquo;s pretty, it&rsquo;s informative, and it makes us feel like we&rsquo;re learning something without reading long lines of text. One of the most popular Javascript libraries for creating data visualizations are with D3.js.</p>




<p>D3 is built on top of these common standards:</p>




<p>  1 .  HTML</p>




<p>  2 .  CSS</p>




<p>  3 .  The DOM</p>




<p>  4 .  SVG</p>




<p>Before starting D3, we should be somewhat familiar with the concepts above. I&rsquo;m pretty familiar with 1-3, so today I&rsquo;m writing about.. SVG</p>




<h1>What is SVG?</h1>




<ul>
<li>SVG stands for &lsquo;Scalable Vector Graphics&rsquo;</li>
<li>A type of graphic component for the web</li>
<li>SVG is vector-based. (This means images SCALE nicely)</li>
<li>SVG is written in XML format</li>
<li>SVG can be directly embedded in HTML</li>
<li>CSS can apply to SVG elements!</li>
</ul>




<h1>A Basic Circle</h1>




<p><svg width="120" height="120">
  <circle cx="60" cy="60" r="40" stroke="blue" stroke-width="2" fill="yellow" />
</svg></p>




<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='html'><span class='line'><span class="nt">&lt;svg</span> <span class="na">width=</span><span class="s">&quot;120&quot;</span> <span class="na">height=</span><span class="s">&quot;120&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>  <span class="nt">&lt;circle</span> <span class="na">cx=</span><span class="s">&quot;60&quot;</span> <span class="na">cy=</span><span class="s">&quot;60&quot;</span> <span class="na">r=</span><span class="s">&quot;50&quot;</span> <span class="na">stroke=</span><span class="s">&quot;blue&quot;</span> <span class="na">stroke-width=</span><span class="s">&quot;2&quot;</span> <span class="na">fill=</span><span class="s">&quot;yellow&quot;</span> <span class="nt">/&gt;</span>
</span><span class='line'><span class="nt">&lt;/svg&gt;</span>
</span></code></pre></td></tr></table></div></figure>




<p>Breaking down the syntax:
- Enclosed in an <code>&lt;svg&gt;&lt;/svg&gt;</code> tag</p>




<ul>
<li><p>The <code>width</code> and <code>height</code> correspond to the image size</p></li>
<li><p>Create the circle with the <code>&lt;circle&gt;</code> tag</p></li>
<li><p><code>cx</code> and <code>cy</code> refer to the &lsquo;center x&rsquo; and &lsquo;center y&rsquo; which places the circle&rsquo;s middle relative to the image size. If you want the circle in the middle, <code>cx</code> and <code>cy</code> default to (0,0)</p></li>
<li><p><code>r</code> refers to the circle&rsquo;s radius</p></li>
<li><p><code>stroke</code>,<code>stroke-width</code>,and <code>fill</code> are all visual properties to change the stroke and color</p></li>
</ul>




<h1>With CSS</h1>




<p><svg width="400" height="200">
  <rect width="400" height="200" style="fill:blue;stroke:pink;stroke-width:10;fill-opacity:0.1;stroke-opacity:0.9" />
</svg></p>




<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='html'><span class='line'><span class="nt">&lt;svg</span> <span class="na">width=</span><span class="s">&quot;400&quot;</span> <span class="na">height=</span><span class="s">&quot;200&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>  <span class="nt">&lt;rect</span> <span class="na">width=</span><span class="s">&quot;400&quot;</span> <span class="na">height=</span><span class="s">&quot;200&quot;</span> <span class="na">style=</span><span class="s">&quot;fill:blue;stroke:pink;stroke-width:10;fill-opacity:0.1;stroke-opacity:0.9&quot;</span> <span class="nt">/&gt;</span>
</span><span class='line'><span class="nt">&lt;/svg&gt;</span>
</span></code></pre></td></tr></table></div></figure>




<p>Here, we&rsquo;re using the rectangle tag. I used in-line CSS to demonstrate how we can pass in regular CSS definitions to set the element&rsquo;s properties.</p>




<h2>Other elements</h2>




<ul>
<li>Ellipse <ellipse></li>
<li>Line <line></li>
<li>Polyline <polyline></li>
<li>Polygon <polygon></li>
<li>Path <path></li>
</ul>




<h1><code>&lt;g&gt;</code> tag</h1>




<p>One very important tag used a LOT in D3 is the <code>&lt;g&gt;</code> tag. This tag simply groups elements together. This is especially important in making <em>transformations</em> for D3.</p>




<p><svg>
    <g>
      <rect x="10" y="20" height="50" width="75"
          style="stroke: black; fill: yellow"/>
      <text x="10" y="90" style="stroke: black;">
        Following the shape..</text>
    </g>
</svg></p>




<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
</pre></td><td class='code'><pre><code class='html'><span class='line'><span class="nt">&lt;svg&gt;</span>
</span><span class='line'>    <span class="nt">&lt;g&gt;</span>
</span><span class='line'>      <span class="nt">&lt;rect</span> <span class="na">x=</span><span class="s">&quot;10&quot;</span> <span class="na">y=</span><span class="s">&quot;20&quot;</span> <span class="na">height=</span><span class="s">&quot;50&quot;</span> <span class="na">width=</span><span class="s">&quot;75&quot;</span>
</span><span class='line'>          <span class="na">style=</span><span class="s">&quot;stroke: black; fill: yellow&quot;</span><span class="nt">/&gt;</span>
</span><span class='line'>      <span class="nt">&lt;text</span> <span class="na">x=</span><span class="s">&quot;10&quot;</span> <span class="na">y=</span><span class="s">&quot;90&quot;</span> <span class="na">style=</span><span class="s">&quot;stroke: black;&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>        Following the shape..<span class="nt">&lt;/text&gt;</span>
</span><span class='line'>    <span class="nt">&lt;/g&gt;</span>
</span><span class='line'><span class="nt">&lt;/svg&gt;</span>
</span></code></pre></td></tr></table></div></figure>




<p><svg height="200">
    <g transform="rotate(45 50 50) translate(20 0)">
      <rect x="10" y="20" height="50" width="75"
          style="stroke: black; fill: yellow"/>
      <text x="10" y="90" style="stroke: black;">
        Following the shape..</text>
    </g>
</svg></p>




<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
</pre></td><td class='code'><pre><code class='html'><span class='line'><span class="nt">&lt;svg</span> <span class="na">height=</span><span class="s">&quot;200&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>    <span class="nt">&lt;g</span> <span class="na">transform=</span><span class="s">&quot;rotate(45 50 50) translate(20 0)&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>      <span class="nt">&lt;rect</span> <span class="na">x=</span><span class="s">&quot;10&quot;</span> <span class="na">y=</span><span class="s">&quot;20&quot;</span> <span class="na">height=</span><span class="s">&quot;50&quot;</span> <span class="na">width=</span><span class="s">&quot;75&quot;</span>
</span><span class='line'>          <span class="na">style=</span><span class="s">&quot;stroke: black; fill: yellow&quot;</span><span class="nt">/&gt;</span>
</span><span class='line'>      <span class="nt">&lt;text</span> <span class="na">x=</span><span class="s">&quot;10&quot;</span> <span class="na">y=</span><span class="s">&quot;90&quot;</span> <span class="na">style=</span><span class="s">&quot;stroke: black;&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>        Following the shape..<span class="nt">&lt;/text&gt;</span>
</span><span class='line'>    <span class="nt">&lt;/g&gt;</span>
</span><span class='line'><span class="nt">&lt;/svg&gt;</span>
</span></code></pre></td></tr></table></div></figure>




<p>Notice, the only change we made here is that I transformed the entire group. The important line here is <code>&lt;g transform="rotate(45 50 50) translate(20 0)"&gt;</code> in the opening g tag. It adds the rotation and translation to our SVG image.</p>




<p>YAY IT&rsquo;S LINEAR ALGEBRA ALL OVER AGAIN!</p>




<p><code>scale</code> is a another transformation that might come in handy to you.</p>




<p><svg width="400" height="400">
    <g transform="rotate(45 50 50) translate(100 0) scale(2 2)">
      <rect x="10" y="20" height="50" width="75"
          style="stroke: black; fill: yellow"/>
      <text x="10" y="90" style="stroke: black;">
        Following the shape..</text>
    </g>
</svg></p>




<p>Stay tuned for my next post on how to integrate with D3!</p>




<p>Let&rsquo;s see what you can make!</p>




<p>&lt;3 Kana</p>




<p>third example courtesy of: <a href="http://tutorials.jenkov.com/svg/g-element.html">http://tutorials.jenkov.com/svg/g-element.html</a></p>


  </p>
  <span class="meta">
    written 








  


<time datetime="2014-11-13T20:58:52-05:00" pubdate data-updated="true"></time>
    

  </span>

  
</article>

        </div>
      </div>
      
      
      <div class="row">
        <div class="col-md-offset-3 col-md-6">
          <article>
  <h2><a href="/blog/2014/10/31/the-things-i-do-when-i-code/">The Things I Do When I Code.</a></h2>
  
  <p>
    <h2>When I try to explain to my friends what Ruby is..</h2>




<p><img src="http://content.screencast.com/users/kabesailthru/folders/Jing/media/3fbd56b1-169f-42f5-8167-5f491a6dd983/00000177.png" alt="alt text" /></p>




<h2>At least Avi teaches us the right way..</h2>




<p><img src="http://content.screencast.com/users/kabesailthru/folders/Jing/media/552e6f26-91f5-4fc4-8dca-86a01a0b9c10/00000183.png" alt="alt text" /></p>




<h2>When I fork a lab, open it up in Sublime, and run &lsquo;rspec&rsquo;&hellip;</h2>




<p><img src="http://media.giphy.com/media/YP2Og89Dxm8cU/giphy.gif" alt="alt text" /></p>




<h2>My thoughts right before scraping pages and pages of data..</h2>




<p><img src="http://content.screencast.com/users/kabesailthru/folders/Jing/media/051e95cb-2556-4ff6-ba5e-1f67720106af/00000182.png" alt="alt text" /></p>




<h2>Time for lunch!</h2>




<p><img src="http://i.giphy.com/rnxOnmdjhamFq.gif" alt="alt text" /></p>




<h2>Guess that means I&rsquo;ll entertain myself&hellip;with code memes</h2>




<p><img src="http://content.screencast.com/users/kabesailthru/folders/Jing/media/984df8dc-a09c-496b-846b-151ac3767477/00000184.png" alt="alt text" /></p>




<h2>Ok back to work, this is how I often go about solving labs&hellip;</h2>




<p><img src="http://content.screencast.com/users/kabesailthru/folders/Jing/media/97f115b9-d4fd-434a-b300-c9022728c67b/00000178.png" alt="alt text" /></p>




<h2>And sometimes I don&rsquo;t really know what I&rsquo;m doing</h2>




<p><img src="http://i.giphy.com/1bffEtmXGc8Ny.gif" alt="alt text" /></p>




<h2>But when a lab is complete, well, there are all sorts of feelings..</h2>




<p><img src="http://img.chan4chan.com/img/2009-03-14/1237033560670.gif" alt="alt text" />
<img src="http://i.giphy.com/BNBsX9OFigPvO.gif" alt="alt text" /> Ironbot pug me.
<img src="http://i.giphy.com/dkGhBWE3SyzXW.gif" alt="alt text" /></p>




<h2>In fact, I&rsquo;ve started to dream not only in code but also in green lights..</h2>




<p><img src="http://www.thelightlab.com/wp-content/uploads/2014/01/6097196-background-of-blurred-green-christmas-lights.jpg" alt="alt text" /></p>




<h2>And I&rsquo;m thinking about code on the subway among the &ldquo;Normals&rdquo;</h2>




<p><img src="http://ep.yimg.com/ay/rnrdist/pinky-the-brain-prod-cel-2.jpg" alt="alt text" /></p>




<h2>To me, programming in Ruby is just one of those things that feel oddly satisfying</h2>




<p><img src="http://i.giphy.com/JsledhNuqgCKA.gif" alt="alt text" />
<img src="http://i.giphy.com/heyCjLAj496Ao.gif" alt="alt text" />
<img src="http://i.giphy.com/Y5z7Z32aI5xFS.gif" alt="alt text" /></p>




<h2>Happy Halloween!</h2>


  </p>
  <span class="meta">
    written 








  


<time datetime="2014-10-31T00:19:50-04:00" pubdate data-updated="true"></time>
    

  </span>

  
</article>

        </div>
      </div>
      
      
      <div class="row">
        <div class="col-md-offset-3 col-md-6">
          <article>
  <h2><a href="/blog/2014/10/16/the-nokogiri-saw/">The Nokogiri Saw</a></h2>
  
  <p>
    <p>In Japanese, the term &ldquo;nokogiri&rdquo; refers to this:</p>




<p><img src="http://hsto.org/storage/habraeffect/11/8d/118d003d546a1fa1e240e1cc4dfb4a61.jpg" title="Nokogiri" alt="Nokogiri" /></p>




<p>It&rsquo;s a saw used for cutting wood, but instead of making the cut on the &ldquo;push&rdquo; like a traditional European saw, the Nokogiri saw cuts on the &ldquo;pull&rdquo;.</p>




<p>Coming from a small <a href="http://telegraph.co.uk/technology/news/11041814/Could-computers-put-art-historians-out-of-work.html">background</a> in Data Science, my brain lit up as soon as I was introduced to this magical gem.</p>




<h3>DEFINE THE PROBLEM</h3>




<p>After explaining to my boyfriend the concept of &lsquo;scraping&rsquo;, I asked him, &ldquo;What do you want me to scrape for you?&rdquo;</p>




<p>&ldquo;I want to know how to title my Reddit posts so it catches the most attention.&rdquo;</p>




<p>Great, problem defined.</p>




<h3>SPEC IT OUT</h3>




<p>Immediately I understand that solving this problem will take lots and lots of data and time. Therefore, the goal of this blog post is to lay out the foundation of a project that I can build on.</p>




<h3>Here is what I know:</h3>




<ul>
<li>I want to scrape Reddit using Nokogiri</li>
<li>I want to retrieve the titles of each post</li>
<li>I want to use these titles and add them to some data structure I can iterate on</li>
<li>I want to find the most frequently used words</li>
<li>The Reddit RSS would be cool to use but I want to practice scraping.</li>
</ul>




<h3>DISCOVER ISSUES</h3>




<p>One issue I encountered when trying to iterate through multiple pages is that the URL structure made no sense.</p>




<p>Page 1 - <a href="http://www.reddit.com/">http://www.reddit.com/</a></p>




<p>Page 2 - <a href="http://www.reddit.com/?count=25&amp;after=t3_2jg309">http://www.reddit.com/?count=25&amp;after=t3_2jg309</a></p>




<p>Page 3 - <a href="http://www.reddit.com/?count=50&amp;after=t3_2jg30w">http://www.reddit.com/?count=50&amp;after=t3_2jg30w</a></p>




<p>Page 4 - <a href="http://www.reddit.com/?count=75&amp;after=t3_2jgfto">http://www.reddit.com/?count=75&amp;after=t3_2jgfto</a></p>




<p>At first I figured that iterating through increments of 25 in the count parameter of the URL would work since each page contains 25 items.</p>




<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'>  <span class="n">count</span> <span class="o">=</span> <span class="mi">0</span>
</span><span class='line'>  <span class="n">str</span> <span class="o">=</span> <span class="s2">&quot;http://www.reddit.com/?count=&quot;</span>
</span><span class='line'>  <span class="mi">10</span><span class="o">.</span><span class="n">times</span> <span class="k">do</span>
</span><span class='line'>    <span class="n">reddit</span> <span class="o">&lt;&lt;</span> <span class="n">scrape_titles</span><span class="p">(</span><span class="n">str</span><span class="o">+</span><span class="p">(</span><span class="n">count</span><span class="o">+</span><span class="mi">24</span><span class="p">)</span><span class="o">.</span><span class="n">to_s</span><span class="p">)</span>
</span><span class='line'>    <span class="n">count</span> <span class="o">=</span> <span class="n">count</span> <span class="o">+</span> <span class="mi">25</span>
</span><span class='line'>  <span class="k">end</span>
</span></code></pre></td></tr></table></div></figure>




<p>This did not work. What ended up happening was that duplicate titles appeared in my array. In fact, no matter what value I inserted for count, it showed me the same page. It was clear that getting a static URL for &ldquo;Page 2 of Reddit&rsquo;s Front Page&rdquo; was not available. Based on the URL and HTML, the &lsquo;after&rsquo; parameter was checking the ID of the post and creating content based on that. The &lsquo;count&rsquo; param was irrelavent.</p>




<h3>CONTINUE ANYWAY..</h3>




<p>Instead of iterating through the front page titles, I decided to find the titles on the each of the Reddit subheading pages will do.</p>




<p><img src="http://content.screencast.com/users/kabesailthru/folders/Jing/media/80a85640-8525-490e-ac5e-66b869adda92/00000166.png" title="Reddit Subheading" alt="Reddit Subheading" /></p>




<p>(Note: I excluded gilded, wiki, and promoted)</p>




<p>Below is the code I have for my scraper class.</p>




<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="k">class</span> <span class="nc">RedditScraper</span>
</span><span class='line'>  <span class="vc">@@reddit</span> <span class="o">=</span> <span class="o">[]</span>
</span><span class='line'>  <span class="no">PAGES</span> <span class="o">=</span> <span class="o">[</span><span class="s2">&quot;&quot;</span><span class="p">,</span><span class="s2">&quot;/new/&quot;</span><span class="p">,</span><span class="s2">&quot;/rising/&quot;</span><span class="p">,</span><span class="s2">&quot;/controversial/&quot;</span><span class="p">,</span><span class="s2">&quot;/top/&quot;</span><span class="o">]</span>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'>  <span class="k">def</span> <span class="nf">initialize_all_titles</span>
</span><span class='line'>    <span class="n">str</span> <span class="o">=</span> <span class="s2">&quot;http://www.reddit.com&quot;</span>
</span><span class='line'>    <span class="no">PAGES</span><span class="o">.</span><span class="n">each</span> <span class="k">do</span> <span class="o">|</span><span class="n">page</span><span class="o">|</span>
</span><span class='line'>      <span class="vc">@@reddit</span> <span class="o">&lt;&lt;</span> <span class="n">scrape_titles</span><span class="p">(</span><span class="n">str</span><span class="o">+</span><span class="n">page</span><span class="p">)</span>
</span><span class='line'>    <span class="k">end</span>
</span><span class='line'>
</span><span class='line'>    <span class="vc">@@reddit</span><span class="o">.</span><span class="n">uniq</span><span class="o">.</span><span class="n">flatten</span>
</span><span class='line'>  <span class="k">end</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">def</span> <span class="nf">scrape_titles</span><span class="p">(</span><span class="n">str</span><span class="p">)</span>
</span><span class='line'>    <span class="n">doc</span> <span class="o">=</span> <span class="no">Nokogiri</span><span class="o">::</span><span class="no">HTML</span><span class="p">(</span><span class="nb">open</span><span class="p">(</span><span class="n">str</span><span class="p">))</span>
</span><span class='line'>    <span class="n">arr</span><span class="o">=[]</span>
</span><span class='line'>    <span class="n">doc</span><span class="o">.</span><span class="n">css</span><span class="p">(</span><span class="s1">&#39;a.title&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">each</span> <span class="k">do</span> <span class="o">|</span><span class="n">title</span><span class="o">|</span>
</span><span class='line'>      <span class="n">arr</span> <span class="o">&lt;&lt;</span> <span class="n">title</span><span class="o">.</span><span class="n">text</span>
</span><span class='line'>    <span class="k">end</span>
</span><span class='line'>    <span class="n">arr</span>
</span><span class='line'>  <span class="k">end</span>
</span><span class='line'>
</span><span class='line'><span class="k">end</span>
</span></code></pre></td></tr></table></div></figure>




<p>Running <code>RedditScraper.new.initialize_all_titles</code> returns an <code>Array</code> with all my title names. Awesome!</p>




<p>Here is a sample of my output so far
<img src="http://content.screencast.com/users/kabesailthru/folders/Jing/media/4ce3c544-0f71-4bec-b463-7e0a19b0f55c/00000168.png" alt="Titles Array" /></p>




<p>Next I need to analyze this data. What I really want to do is to find the frequency of each of the words to see &ldquo;what&rsquo;s trending&rdquo; right now. I created a class called <code>RedditAnalyzer</code> which allows me to do this.</p>




<p>Lets iterate through our titles array, graciously given to us by <code>RedditScraper</code>, find individual words, and keep a frequency count each time I come across this word.</p>




<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="k">class</span> <span class="nc">RedditAnalyzer</span>
</span><span class='line'>  <span class="vc">@@frequency</span> <span class="o">=</span> <span class="p">{}</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">def</span> <span class="nf">call</span>
</span><span class='line'>    <span class="n">scraper</span> <span class="o">=</span> <span class="no">RedditScraper</span><span class="o">.</span><span class="n">new</span><span class="o">.</span><span class="n">initialize_all_titles</span>
</span><span class='line'>    <span class="n">add</span><span class="p">(</span><span class="n">scraper</span><span class="p">)</span>
</span><span class='line'>    <span class="c1">#binding.pry</span>
</span><span class='line'>  <span class="k">end</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">def</span> <span class="nf">add</span><span class="p">(</span><span class="n">arr</span><span class="p">)</span>
</span><span class='line'>    <span class="n">arr</span><span class="o">.</span><span class="n">each</span> <span class="k">do</span> <span class="o">|</span><span class="n">title</span><span class="o">|</span>
</span><span class='line'>      <span class="n">title</span><span class="o">.</span><span class="n">downcase</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot; &quot;</span><span class="p">)</span><span class="o">.</span><span class="n">each</span> <span class="k">do</span> <span class="o">|</span><span class="n">word</span><span class="o">|</span>
</span><span class='line'>        <span class="n">word</span><span class="o">.</span><span class="n">gsub</span><span class="p">(</span><span class="sr">/[,.\[\]&#39;?!-\&quot;]/</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span>
</span><span class='line'>        <span class="k">if</span> <span class="vc">@@frequency</span><span class="o">[</span><span class="n">word</span><span class="o">]</span>
</span><span class='line'>          <span class="vc">@@frequency</span><span class="o">[</span><span class="n">word</span><span class="o">]</span> <span class="o">=</span> <span class="vc">@@frequency</span><span class="o">[</span><span class="n">word</span><span class="o">]</span> <span class="o">+</span> <span class="mi">1</span>
</span><span class='line'>        <span class="k">else</span>
</span><span class='line'>          <span class="vc">@@frequency</span><span class="o">[</span><span class="n">word</span><span class="o">]</span> <span class="o">=</span> <span class="mi">1</span>
</span><span class='line'>        <span class="k">end</span>
</span><span class='line'>      <span class="k">end</span>
</span><span class='line'>    <span class="k">end</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">end</span>
</span><span class='line'><span class="k">end</span>
</span></code></pre></td></tr></table></div></figure>




<p>Two more functions I decided to add are below. <code>delete_common</code> is called from <code>top_20</code> and removes the 100 most common words in the English language. The <code>top_20</code> function prints out the top 20 most frequently used words.</p>




<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'>  <span class="k">def</span> <span class="nf">top_20</span>
</span><span class='line'>    <span class="n">delete_common</span>
</span><span class='line'>    <span class="n">sorted</span> <span class="o">=</span> <span class="vc">@@frequency</span><span class="o">.</span><span class="n">sort_by</span> <span class="p">{</span><span class="o">|</span><span class="n">k</span><span class="p">,</span><span class="n">v</span><span class="o">|</span> <span class="o">-</span><span class="n">v</span><span class="p">}</span>
</span><span class='line'>    <span class="n">sorted</span><span class="o">.</span><span class="n">each_with_index</span> <span class="k">do</span> <span class="o">|</span><span class="n">word</span><span class="p">,</span><span class="n">ind</span><span class="o">|</span>
</span><span class='line'>      <span class="nb">puts</span> <span class="s2">&quot;</span><span class="si">#{</span><span class="n">word</span><span class="o">[</span><span class="mi">0</span><span class="o">]</span><span class="si">}</span><span class="s2"> with frequency </span><span class="si">#{</span><span class="n">word</span><span class="o">[</span><span class="mi">1</span><span class="o">]</span><span class="si">}</span><span class="s2">&quot;</span> <span class="k">if</span> <span class="n">ind</span> <span class="o">&lt;=</span><span class="mi">19</span>
</span><span class='line'>    <span class="k">end</span>
</span><span class='line'>  <span class="k">end</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">def</span> <span class="nf">delete_common</span>
</span><span class='line'>    <span class="n">text</span> <span class="o">=</span> <span class="o">[]</span>
</span><span class='line'>    <span class="no">File</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="s2">&quot;resources/common_words.txt&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">each_line</span> <span class="k">do</span> <span class="o">|</span><span class="n">line</span><span class="o">|</span>
</span><span class='line'>      <span class="n">text</span> <span class="o">&lt;&lt;</span> <span class="n">line</span><span class="o">.</span><span class="n">chop</span>
</span><span class='line'>    <span class="k">end</span>
</span><span class='line'>    <span class="vc">@@frequency</span><span class="o">.</span><span class="n">each</span> <span class="k">do</span> <span class="o">|</span><span class="n">word</span><span class="p">,</span><span class="n">v</span><span class="o">|</span>
</span><span class='line'>      <span class="k">if</span> <span class="n">text</span><span class="o">.</span><span class="n">include?</span><span class="p">(</span><span class="n">word</span><span class="p">)</span>
</span><span class='line'>        <span class="vc">@@frequency</span><span class="o">.</span><span class="n">delete</span><span class="p">(</span><span class="n">word</span><span class="p">)</span>
</span><span class='line'>      <span class="k">end</span>
</span><span class='line'>    <span class="k">end</span>
</span><span class='line'>  <span class="k">end</span>
</span></code></pre></td></tr></table></div></figure>




<h3>AND FINALLY..THE TOP 20 MOST FREQUENT WORDS USED IN A TITLE ON REDDIT AT 3:41AM ON 10/17:</h3>




<p>i with frequency 18</p>




<p>not with frequency 10</p>




<p>til with frequency 6</p>




<p>&lsquo;-&rsquo; with frequency 5</p>




<p>why with frequency 5</p>




<p>using with frequency 5</p>




<p>just with frequency 4</p>




<p>man with frequency 4</p>




<p>ebola with frequency 4</p>




<p>good with frequency 4</p>




<p>best with frequency 4</p>




<p>only with frequency 4</p>




<p>18 with frequency 3</p>




<p>while with frequency 3</p>




<p>million with frequency 3</p>




<p>travel with frequency 3</p>




<p>guy with frequency 3</p>




<p>sick with frequency 3</p>




<p>don&rsquo;t with frequency 3</p>




<p>eli5: with frequency 3</p>




<h2>HOW ABOUT: &ldquo;TIL: WHY 18 MILLION DON&rsquo;T TRAVEL WHILE MAN IS SICK WITH EBOLA&rdquo;</h2>




<p>Maybe I should create some bots next&hellip;</p>




<p>Full repo:
<a href="https://github.com/kanaabe/scraping_reddit">https://github.com/kanaabe/scraping_reddit</a></p>




<h4>TODO LIST</h4>




<ul>
<li>get rid of that &lsquo;-&rsquo; word</li>
<li>add visualization using another Ruby gem</li>
<li>possibly add more &lsquo;common words&rsquo;</li>
<li>refactor some methods from above, I was being hasty.</li>
</ul>




  </p>
  <span class="meta">
    written 








  


<time datetime="2014-10-16T22:39:01-04:00" pubdate data-updated="true"></time>
    

  </span>

  
</article>

        </div>
      </div>
      
    </div>
  </div>
</div>

				</div>
			</div>
			<footer id="footer" class="inner">
				Copyright &copy; 2014 

    <a href="/about">Kana Abe</a>
 |
<span class="credit">Powered by <a href="http://octopress.org">Octopress</a>, customized with <a href="https://github.com/mjhea0/nologo">noLogo</a></span></footer>
			<script src="/javascripts/slash.js"></script>








	</div>
</body>
</html>
